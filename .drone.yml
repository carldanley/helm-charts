kind: pipeline
type: docker
name: default

workspace:
  base: /helm-charts

platform:
  os: linux
  arch: amd64

volumes:
- name: charts
  temp: {}

steps:
- name: lint
  image: alpine/helm:latest
  commands:
  - helm version
  - sh ./lint-charts.sh

- name: build
  image: alpine/helm:latest
  environment:
    OUTPUT_DIRECTORY: /charts
  commands:
  - helm version
  - sh ./build-charts.sh
  volumes:
  - name: charts
    path: /charts

- name: testing
  image: alpine
  commands:
  - ls -la /charts
  volumes:
  - name: charts
    path: /charts
